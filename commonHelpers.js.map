{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputEl = document.querySelector('#datetime-picker');\nconst btnStartEl = document.querySelector('[data-start]');\nconst daysEl = document.querySelector('[data-days]');\nconst hoursEl = document.querySelector('[data-hours]');\nconst minutesEl = document.querySelector('[data-minutes]');\nconst secondsEl = document.querySelector('[data-seconds]');\n\n\n\n\nlet userSelectedDate = 0;\nlet timerId = null;\nlet changeDate = null;\n\nbtnStartEl.disabled = true;\n\nconst fp = flatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    checkDate(selectedDates[0]);\n   },\n});\n\n\nfunction checkDate(date) {\n  if (date < Date.now()) {\n    iziToast.error({\n      backgroundColor: 'red',\n      messageColor: 'white',\n      position: 'topRight',\n      message: 'Please choose a date in the future',\n      closeOnClick: true,\n      close: false,\n      timeout: 2000,\n      iconUrl: 'https://www.svgrepo.com/show/437366/xmark-circle.svg',\n    });\n    btnStartEl.disabled = true;\n    return;\n  } else {\n    btnStartEl.disabled = false;\n  }\n  userSelectedDate = date.getTime() - Date.now();\n  changeDate = convertMs(userSelectedDate);\n  timerEnd(changeDate);\n}\n\n  function convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\n// console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n// console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n// console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\n\nbtnStartEl.addEventListener('click', initializeClock);\n\nfunction initializeClock() {\n  timerId = setInterval(function() {\n  btnStartEl.disabled = true;\n  inputEl.disabled = true;\n\n  userSelectedDate -= 1000;\n\n  if (userSelectedDate <=0) {\n    clearInterval(timerId);\n    btnStartEl.disabled = false;\n    inputEl.disabled = false;\n  } else {\n    changeDate = convertMs(userSelectedDate);\n    timerEnd(changeDate);\n  }\n}, 1000);\n}\n\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction timerEnd(changeDate) {\n  daysEl.textContent = changeDate.days;\n  hoursEl.textContent = changeDate.hours;\n  minutesEl.textContent = changeDate.minutes;\n  secondsEl.textContent = changeDate.seconds;\n}"],"names":["inputEl","btnStartEl","daysEl","hoursEl","minutesEl","secondsEl","userSelectedDate","timerId","changeDate","flatpickr","selectedDates","checkDate","date","iziToast","convertMs","timerEnd","ms","days","addLeadingZero","hours","minutes","seconds","initializeClock","value"],"mappings":"0IAMA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAKzD,IAAIC,EAAmB,EACnBC,EAAU,KACVC,EAAa,KAEjBP,EAAW,SAAW,GAEXQ,EAAU,mBAAoB,CACvC,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BC,EAAUD,EAAc,CAAC,CAAC,CAC1B,CACJ,CAAC,EAGD,SAASC,EAAUC,EAAM,CACvB,GAAIA,EAAO,KAAK,MAAO,CACrBC,EAAS,MAAM,CACb,gBAAiB,MACjB,aAAc,QACd,SAAU,WACV,QAAS,qCACT,aAAc,GACd,MAAO,GACP,QAAS,IACT,QAAS,sDACf,CAAK,EACDZ,EAAW,SAAW,GACtB,MACJ,MACIA,EAAW,SAAW,GAExBK,EAAmBM,EAAK,QAAS,EAAG,KAAK,IAAG,EAC5CJ,EAAaM,EAAUR,CAAgB,EACvCS,EAASP,CAAU,CACrB,CAEE,SAASM,EAAUE,EAAI,CAQvB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEK,EAAUH,EACd,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAOApB,EAAW,iBAAiB,QAASqB,CAAe,EAEpD,SAASA,GAAkB,CACzBf,EAAU,YAAY,UAAW,CACjCN,EAAW,SAAW,GACtBD,EAAQ,SAAW,GAEnBM,GAAoB,IAEhBA,GAAmB,GACrB,cAAcC,CAAO,EACrBN,EAAW,SAAW,GACtBD,EAAQ,SAAW,KAEnBQ,EAAaM,EAAUR,CAAgB,EACvCS,EAASP,CAAU,EAEvB,EAAG,GAAI,CACP,CAGA,SAASU,EAAeK,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASR,EAASP,EAAY,CAC5BN,EAAO,YAAcM,EAAW,KAChCL,EAAQ,YAAcK,EAAW,MACjCJ,EAAU,YAAcI,EAAW,QACnCH,EAAU,YAAcG,EAAW,OACrC"}